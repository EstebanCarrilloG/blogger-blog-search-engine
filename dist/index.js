(()=>{"use strict";const t={blogUrl:"",textOrImgUrl:"Nombre o logo de tu blog",resultsPerPage:10,monthFormat:["","Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dic"]},e=function(e,n){const s=$(".posts-results-container");s.html(""),e=e.slice((n-1)*t.resultsPerPage,n*t.resultsPerPage),s.append(e.map((e=>(e=>{const n=document.createElement("div");n.classList.add("post-searched__content");let s="",a="",o=$("<div>").html(e.content.$t);a=o.find("p.blog-post-description").text()?o.find("p.blog-post-description").text():"Descripcion del post";for(let t=0;t<e.link.length;t++)if("alternate"==e.link[t].rel){s=e.link[t].href;break}let r=e.published.$t,i=r.substring(0,4),l=r.substring(5,7),c=r.substring(8,10),p=t.monthFormat[parseInt(l,10)]+" "+c+", "+i,u=e.updated.$t,d=u.substring(0,4),g=u.substring(5,7),h=u.substring(8,10),m=t.monthFormat[parseInt(g,10)]+" "+h+", "+d;const b=`\n    <a target ="_blank" class = "post-content__url" href = "${s}"><p>${e.title.$t}</p></a>\n      <p class="post-content__info">\n                <span class ="post-date" >${p}</span> - ${a.slice(0,200)}${a.length>200?"...":""} \n              </p>\n              <p class="post-content-tags">${void 0!==e.category?e.category.map((t=>`<span class= "tag-text">${t.term}</span>`)).join(""):'<span class= "tag-text">No tags found</span>'}</p>\n              <p class="post-content__ad">\n                  <span><b>Autor:</b> ${e.author[0].name.$t}</span> |\n                  <span><b>Ultima actualizaci√≥n:</b> ${m}</span>\n            </p>`;return n.innerHTML=b,n})(e))))},n=async function(n){const s=$("#searchResultsContainer");let a=$(".posts-search-info"),o=$("#logo");if(a.html("Cargando..."),s.empty(),""===n)return a.html("Error, Ingrese un termino de busqueda.");if(!function(t){let e=new RegExp(/^[A-Za-z0-9\s]+$/g);return t.trim(),t.match(e)}(n))return a.html("Error, No se admiten caracteres especiales como terminos de busqueda.");const r=new URL(window.location.href);r.searchParams.set("search",n),window.history.pushState({},"",r.href),o.animate({height:0},300),setTimeout((()=>{o.hide()}),500);try{const o=await function(e){const n=`${t.blogUrl}/feeds/posts/default/?alt=json-in-script&q=${e}&max-results=500`;return $.ajax({url:n,type:"get",dataType:"jsonp",success:function(t){return t},error:function(t,e,n){return n}})}(n),{entry:r}=o.feed;if(void 0===r)return a.html(`No Se encontaron resultados para el termino de busqueda : <b>"${n}"</b>`);a.html(`Se encontraron <b>${r.length}</b> resultados para el termino de busqueda : <b>"${n}"</b>`),s.html(' \n        <p class="pagination-container-info"></p>\n        <div class="posts-results-container"></div>\n        <div class="pagination-container"><ul id="pagination"></ul></div>');const i=function(e){const n=$("#pagination"),s=e,a=Math.ceil(s/t.resultsPerPage);n.html("");for(let t=1;t<=a;t++)n.append('<li ><a href = "#" class = "page-number">'+t+"</a></li>");return $(".page-number").first().addClass("page-li-focus"),a}(r.length);let l=$(".pagination-container-info");const c=t=>{l.html(`<p>Pagina <b>${t}</b> de <b>${i}</b></p>`)};let p=1;$(".page-number").each(((t,n)=>{$(n).on("click",(function(){c(t+1),$(".page-number").removeClass("page-li-focus"),$(n).addClass("page-li-focus"),e(r,t+1)}))})),c(p),e(r,1)}catch(t){console.log("Ha ocurrido un error al obtener los datos.")}};jQuery((function(){$("#searchEngineRoot").html('<div class="search-logo" id="logo"></div>\n      <div class="search-input-container">\n        <input\n          type="text"\n          name=""\n          id="searchInput"\n          placeholder="Ingrese el termino de busqueda."\n        /><span id="postPageSearchBtn" class="fas fa-search"></span>\n      </div>\n      <p class="posts-search-info"></p>\n      <div class="search-results-container" id="searchResultsContainer"></div>');let e=$(".posts-search-info");$("#logo").append(t.textOrImgUrl.match("^https?://")?`<img src="${t.textOrImgUrl}" alt="Logo del blog">`:`<p>${t.textOrImgUrl}</p>`);let s=$("#searchInput");const a=new URL(window.location.href).searchParams;let o="";e.html("Bienvenido! Para comenzar ingrese el termino de busqueda."),a.get("search")&&n(a.get("search")),s.on("input",(function(){o=s.val().toLocaleLowerCase()})),s.on("keydown",(function(t){"Enter"===t.key&&n(o)}))}))})();